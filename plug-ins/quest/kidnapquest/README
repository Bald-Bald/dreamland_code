 * Диаграммы состояний для Kidnap Quest *


Состояния бандита
-----------------

BSTAT_HUNT_PRINCE <-+   
|                   |    
|(нашли принца)     |(принца нет рядом)    
+--> BSTAT_KIDNAP --+      
|    |                  
|(awa|ke && fighting) (принца нет, но есть неспящий герой)
+----+--> BSTAT_FIGHT  
|    |    |                               
|    |    |(awake && !fighting)                              
|    |    +--> BSTAT_HUNT_PRINCE  
|    |    |                                
|(sle|epin|g) 
+----+----+--> BSTAT_SLEEP 
               |
	       |(awake && fighting)
	       +--> BSTAT_FIGHT
	       |
	       |(awake && !fighting)
	       +--> BSTAT_HUNT_PRINCE

	       


Состояния героя
---------------

QSTAT_INIT      
|
|(первый раз пришли к королю)
+--> QSTAT_MARK_RCVD 
|    |
|    |(нашли дите и оно нас признало)
|    +--> QSTAT_KID_FOUND 
|    |    |
|    |	  |(дите и король в одной комнате, мы - в другой)
|    |	  +--> QSTAT_KING_ACK_WAITING
|    |	  |    |
|    |	  |    |(увидели короля)
|    |	  |    +--> QSTAT_FINISHED
|    |	  |                             
|    |    |(втроем в одной комнате)     
|    |    +--> QSTAT_FINISHED        
|    |	  | 
|    |	  |(дите и король в одной комнате, нас нет в мире)
|    |	  +--> QSTAT_BROKEN
|    |	  
|(дит|е и король в одной комнате) 
+----+--> QSTAT_BROKEN


Состояния принца
----------------

STAT_INIT    
|
|(увидели героя с mark) 
+--> STAT_FOLLOW  
|    |
|    |(герой в другой комнате)
|    +--> STAT_LOST    
|    |    |
|    |    |(герой рядом и не сражается)
|    |    +--> STAT_FOLLOW
|    |    |
|    |(укр|али бандиты)
|    +----+--> STAT_KIDNAPPED
|    |    |    |
|    |    |    |(бандитов нет в комнате или они сражаются)
|    |    |    +--> STAT_LOST
|    |    |    
|    |    |    
|    |    |    
|    |    |
|(уви|дели| короля)
+----+----+--> STAT_REUNION 

============================================================================
















## Перевод квестовых очков между персонажами

Согласно `help god price`, при переводе кп снимается процент, его придется высчитать самостоятельно.
Переводить кп можно между персонажами в оффлайне. Для этого используется команда `set char questp <name> <number>`.
Примеры:

Petya попросил перевести персонажу другого игрока, Vasya, 2700 кп. Согласно справке, взымается 10%,
т.е. с Petya надо снять 2970, а Vasya добавить 2700. Команды:
```
set char questp vasya +2700
set char questp petya -2970
```
Команда пишет сколько было и сколько стало, так что легко откатить назад, если что.
Например, если надо установить абсолютное значение:
```
set char questp ruffina 2400
```

## Установка личного сундука

По божественному прайсу, эта услуга стоит 800 кп. Сундук делается из квестовой сумки. Ниже перечислены все шаги.

* Создать сумку и сделать персонажа ее владельцем, проверить что все установилось верно:
```
load obj 103
set obj bag name gosha
stat obj bag
```

* Снять с сумки флаг nodrop, убрать take (чтоб стало невозможно поднять), по желанию заказчика убрать флаг glow:
```
set obj bag extra -H
set obj bag wear -A
set obj bag extra -A
```
Подробнее обо всех флагах см. в `help flags`. Этого же результата можно достичь и через Феню.

* Перекрасить сумку согласно пожеланию заказчика:
```
string obj bag long ...
string obj bag short ...
string obj bag name ...
```

* Бросить сумку в целевой комнате и снять кп за услугу:
```
set char questp gosha -800
```

Редактированию предметов посвящена отдельная [статья в вики](https://github.com/dreamland-mud/dreamland_code/wiki/Item-flags).

## Детатуаж (смена религии)

За 200 qp можно сново стать атеистом. Для этого надо сбросить персонажу религию в `none`:
```
set char religion apostate none
```
Потом найти на теле новоиспеченного атеиста татуировку и уничтожить ее, выставив таймер в 1 минуту. Аккуратно с поиском тату, т.к. в мире может оказаться кто-то еще с такой же татуировкой:
```
owhere tattoo eros
set obj 'tattoo eros' timer 1
stat obj tattoo eros
```
Из Фени можно сделать мгновенный детатуаж:
```javascript
eval get_char_world("apostate").get_eq_char("tattoo").extract()
```

## Телепорт (перенос персонажа в другую комнату)

Если кто-то застрял в комнате без выходов, его можно вытащить оттуда за 150 qp по божественному прайсу.

Переносить лучше в клан или другое безопасное место, например в Беседку (3300).
При этом желательно стоять рядом и убедиться, что это не зеркало:
```
goto tahi
transfer tahi 3300
```
Перенести всех питомцев и чармисов, опять же стоя с ними рядом, иначе неизвестно, кто попадется:
```
transfer <петы, чармисы и тд> 3300
```
Вычесть qp за услуги:
```
set char questp tahi -150
```

## Трупоприношение

Если персонаж умер в труднодоступном месте и не хочет, чтобы его труп развалился и вещи оказались в яме, он может попросить об услуге трупоприношения за 300 qp. Вот какие команды для этого понадобятся богам:

Выяснить, где покоится хладный труп, поднять его и бросить в оговоренном месте. Вычесть qp.
```
owher corpse
at 4815 take corpse
at 3300 drop corpse
set char questp luckyguy -300
```

## Переименование персонажа

Согласно прайсу, это стоит 250 qp. Персонаж должен находиться в это время в мире. Имя владельца на всех его личных вещах обновится автоматически. Но там, где старое имя встречается в описании, например "дьявольское кольцо такого-то", оно останется прежним и может понадобиться переименовать дополнительно.

При переименовке указывается новое имя по-английски и по-русски, со всеми падежами через удвоенную черту:
```
rename Banner Halk Халк||||а||у||а||ом||е
set char questp halk -250
```

Если нужно просто выставить русское имя или поправить падежи:
```
rename halk halk Халк||||а||у||а||ом||е
```

## Выход из клана и прием в клан

Форсированный прием в клан осуществляется командой `clan induct`. Эта команда не проверяет, доступен ли клан для этого персонажа, но для вывода из Outsider и Exile это и не нужно. 

Пример вывода из клана Outsider согласно прайсу:
```
clan induct selena none
set char questp selena -500
```

## Еврей: покраска вещей

Старый еврей, которому смертные отдают свои вещи на покраску (рестринг), бережно складывает все заказы в задней комнате своей конторы (3336). Сами вещи он запирает в сейф. Получить ключ от сейфа можно, подойдя к нему и сказав `ключ`. Кроме того, в комнате установлено три лотка:
```
Лоток с отказами (rejects).
Лоток с подтвержденными заявками (accepts).
Лоток с ожидающими рассмотрения заявками (pending).
```

Все новые заявки попадают в лоток ```pending```. При взгляде на заявку видны все детали.
```
at 3336 take all pend
Ты берешь заказ Tahi, номер so4337917058274 из свежих заявок.

l order
Заказ Tahi номер so4337917058274 на покраску блестящий доспех

Изменить имена: green tunic

зеленая туника падает тебе на голову.
Ты пьешь из зеленой туники.
Ты наносишь повреждения зеленой тунике.
Ты садишься верхом на зеленую тунику.
Ты взмахиваешь зеленой туникой.
Ты мечтаешь о зеленой тунике.

Изменить длинное описание: Зеленая туника небрежно брошена тут.

Комментарий(comment) ревизора.
```

Подтвердить заявку:
```
at 3336 put order accept
Ты кладешь заказ Tahi, номер so4337917058274 в подтвержденные заявки.
```

Отклонить заявку:
```
at 3336 put order reject
Ты кладешь заказ Tahi, номер so4337917058274 в отказы.
```

Добавить свой комментарий, который еврей сообщит заказчику, когда будет возвращать вещь:
```
write order comment + Отличный выбор цвета.
Ты делаешь надпись на заказе ... в разделе comment.
```

### Продвинутое редактирование заявок
Иногда, чтобы не отклонять не слишком удачную покраску или исправить опечатку, можно воспользоваться феней.
Все поля хранятся прямо на заявке в структуре ```restring```:
```javascript
eval order=get_obj_carry("order")
eval ptc(order.rtapi())
...
eval ptc(order.restring.api())
...
Runtime fields:
obj
vict
name
short
long
origShort
```

Исправляем длинное описание:
```javascript
eval order.restring.long="Зеленая туника (tunic) небрежно брошена тут."
```
Добавляем еще одно имя:
```javascript
eval order.restring.name=order.restring.name + " туника"
```
